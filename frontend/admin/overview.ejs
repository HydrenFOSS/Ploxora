
<!DOCTYPE html>
<html lang="en">
<%- include('../components/head') %>

<body class="bg-neutral-900 text-gray-300 font-[Figtree] min-h-screen flex">

  <!-- Sidebar -->
  <%- include('../components/admin_sidebar.ejs') %>

  <!-- Main Content -->
  <div class="flex-1 flex flex-col">
    <!-- Navbar -->
    <%- include('../components/nav.ejs') %>

    <!-- Overview Content -->
    <main class="p-6 grid grid-cols-1 gap-6">
      <div class="bg-neutral-800 rounded-2xl p-6 shadow-lg border border-[#2a2a2a]">
        <h1 class="text-2xl font-bold text-white flex items-center gap-2 mb-4">
          <i data-lucide="info" class="w-6 h-6"></i>
          Admin Overview
        </h1>

        <!-- Dashboard Info -->
        <div class="space-y-4">
          <div class="p-4 bg-[#1a1a1a] rounded-lg border border-[#333]">
            <h2 class="text-lg font-semibold text-white">Dashboard Information</h2>
            <p class="text-gray-400 mt-2">This dashboard was created by <span class="text-green-400 font-bold">ma4z</span>.</p>
            <p class="text-gray-400">Version: <span class="font-mono"><%= version %></span></p>
            <p class="text-gray-400">API Key: <span class="font-mono blur hover:blur-none transition-transform"><%= process.env.API_KEY %></span></p>
            <p class="text-gray-400">Running on Node.js <span class="font-mono"><%= process.version %></span></p>
          </div>
 <div id="update-check" class="p-4 bg-[#1a1a1a] rounded-lg border border-[#333]">
  <h2 class="text-lg font-semibold text-white">Update Check</h2>
  <p class="text-gray-400 mt-2" id="update-status">Checking for updates...</p>
</div>

          <!-- Credits -->
          <div class="p-4 bg-[#1a1a1a] rounded-lg border border-[#333]">
            <h2 class="text-lg font-semibold text-white">Credits</h2>
            <ul class="list-disc list-inside text-gray-400 mt-2 space-y-1">
              <li>Made with ❤️ by <span class="text-green-400">ma4z</span></li>
              <li>Frontend: TailwindCSS + Lucide Icons + ShadcnUI</li>
              <li>Backend: Node.js, Express, Keyv</li>
              <li>Database: SQLite (via Keyv)</li>
            </ul>
          </div>

          <!-- Links -->
          <div class="p-4 bg-[#1a1a1a] rounded-lg border border-[#333]">
            <h2 class="text-lg font-semibold text-white">Resources</h2>
            <div class="mt-2 flex flex-wrap gap-3">
              <a href="https://tailwindcss.com" target="_blank"
                 class="px-3 py-1 rounded-lg bg-green-600 hover:bg-green-700 text-white text-sm font-medium transition">
                 TailwindCSS
              </a>
              <a href="https://lucide.dev" target="_blank"
                 class="px-3 py-1 rounded-lg bg-green-600 hover:bg-green-700 text-white text-sm font-medium transition">
                 Lucide Icons
              </a>
              <a href="https://expressjs.com" target="_blank"
                 class="px-3 py-1 rounded-lg bg-green-600 hover:bg-green-700 text-white text-sm font-medium transition">
                 Express
              </a>
              <a href="https://ui.shadcn.com" target="_blank"
                 class="px-3 py-1 rounded-lg bg-green-600 hover:bg-green-700 text-white text-sm font-medium transition">
                 ShadcnUI
              </a>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
  <script>
    lucide.createIcons();
  </script>
<script>
  const currentVersion = "<%= version %>";

  async function checkForUpdates() {
    const statusEl = document.getElementById('update-status');
    statusEl.textContent = 'Checking for updates...';

    try {
      const response = await fetch('https://ma4z.pages.dev/repo/version_library.json');
      if (!response.ok) throw new Error('Failed to fetch version info');

      const data = await response.json();
      const latestVersion = data['hydren:stable']['ploxora']['versions']['latest'];
      const codename = data['hydren:stable']['ploxora']['codename'];

      if (latestVersion === currentVersion) {
        statusEl.innerHTML = 'You are running the latest version: <span class="text-green-400 font-bold">' + currentVersion + '</span> (' + codename + ')';
      } else {
        const tagUrl = 'tag/' + latestVersion;
        statusEl.innerHTML = 'A new version is available: <span class="text-red-400 font-bold">' + latestVersion + '</span> (' + codename + ') – You have <span class="font-bold">' + currentVersion + '</span> <a href="https://github.com/HydrenFOSS/ploxora/' + tagUrl + '" class="text-blue-400 underline ml-1">Github Release</a>';
      }
    } catch (err) {
      statusEl.textContent = 'Error checking for updates.';
      console.error(err);
    }
  }

  checkForUpdates();
</script>

</body>
</html>

