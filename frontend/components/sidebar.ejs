<!-- Mobile toggle button -->
<button id="sidebarToggle" class="md:hidden fixed top-4 left-4 z-50 p-2 rounded-lg bg-neutral-900 text-white">
  <i data-lucide="menu" class="w-6 h-6"></i>
</button>

<!-- Sidebar -->
<aside id="sidebar"
  class="fixed md:static inset-y-0 left-0 w-64 bg-neutral-950 p-6 flex flex-col transform -translate-x-full md:translate-x-0 transition-transform duration-300 z-40">

  <div class="mb-8 flex justify-center items-center gap-3">
    <img src="/uploads/logo.png" alt="Ploxora Logo" class="h-10 w-auto">
    <h1 class="text-xl font-bold text-white">Ploxora</h1>
  </div>


  <nav class="space-y-3">
    <a href="/dashboard" class="flex items-center gap-3 px-4 py-2 rounded-xl hover:bg-neutral-800 transition">
      <i data-lucide="layout-dashboard" class="w-5 h-5"></i> Dashboard
    </a>

    <a href="/settings" class="flex items-center gap-3 px-4 py-2 rounded-xl hover:bg-neutral-800 transition">
      <i data-lucide="settings" class="w-5 h-5"></i> Settings
    </a>
  <% addons.forEach(a => { %>
  <% if (a.status === "enabled" && a.sidebar && a.sidebar.length > 0) { %>
    <% a.sidebar.forEach(s => { %>
      <% if (s.for === "user") { %>
        <a href="<%= s.path %>"
           class="flex items-center gap-3 px-4 py-2 rounded-xl hover:bg-neutral-800 transition">
          <i data-lucide="<%= s.icon || 'Puzzle' %>" class="w-5 h-5"></i>
          <%= s.text || a.name %>
        </a>
      <% } %>
    <% }) %>
  <% } %>
<% }) %>

<% if (user.admin) { %>
   <a href="/admin/overview" class="flex items-center gap-3 px-4 py-2 rounded-xl hover:bg-neutral-800 transition">
      <i data-lucide="user-star" class="w-5 h-5"></i> Admin
    </a>
<% } %>
  </nav>

  <div class="mt-auto pt-6 border-t border-neutral-800">
    <span class="text-xs text-gray-500">&copy; 2025 Ploxora</span>
  </div>
</aside>

<script>
  const sidebar = document.getElementById("sidebar");
  const toggle = document.getElementById("sidebarToggle");

  toggle.addEventListener("click", () => {
    sidebar.classList.toggle("-translate-x-full");
  });
</script>
